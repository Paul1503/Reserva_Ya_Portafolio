{% extends "bases/base.html" %}
{% load static %}

{% block content %}
{% include 'bases/components/alertas.html' %}

{% if canchas|length == 0 %}
    <div class="nohay">
        <h1>No se encontraron canchas</h1>
    </div>
{% endif %}

{% if canchas|length > 0 %}
<br><br><h2 class="dashboard_cancha_titulo">Canchas con más valoración</h2><br><br>
<div class="card-container">
    {% for item in canchas %}
    <div class="card">
        <div class="image-container">
          <!-- Botón de favoritos -->
          {% if user.is_authenticated %}
            <a class="like-button" data-url="{% url 'plantillas:cambiar_favorito' item.cancha.id_cancha %}">
              {% if item.es_favorito %}
                <i class="fa fa-heart"></i>
              {% else %}
                <i class="fa fa-heart-crack"></i>
              {% endif %}
            </a>
          {% endif %}
          <a href="{% url 'plantillas:detalle_cancha' item.cancha.id_cancha %}">
            {% if item.primera_imagen %}
              <img src="{{ item.primera_imagen.imagen.url }}" alt="Imagen de la cancha deportiva">
            {% endif %}
            <div class="rating">
                {% if item.avg_calificacion %}
                  <span>
                    <i class="fa fa-star"></i>
                    {{ item.avg_calificacion|floatformat:1 }}
                  </span>
                {% else %}
                  <span>N/A</span>
                {% endif %}
              </div>
          </a>
        </div>
        <div class="card-info">
          <h2 class="title">{{ item.cancha.nombre }}</h2>
          <p class="description">{{ item.cancha.descripcion }}</p>
          <p class="price">${{ item.cancha.precio }} CLP hora.</p>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

{% endblock %}
